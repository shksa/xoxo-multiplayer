(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{43:function(e,t,n){e.exports=n(81)},78:function(e,t){},81:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),l=n.n(r),i=n(2),c=n(3),s=n(5),u=n(4),d=n(6),m=n(7),p=n(11),h=p,f=h.default,g=h.css,y=h.createGlobalStyle,v=h.keyframes,b=h.ThemeProvider,P=h.withTheme,w=f,C=function(e){return g(["transition-property:",";transition-duration:1s;transition-delay:0s;transition-timing-function:ease-in-out;"],e)},k=v(["0%{text-shadow:1px 5px 10px black;}50%{text-shadow:1px 2px 5px black;}100%{text-shadow:1px 5px 10px black;}"]),x=v(["0%{box-shadow:8px 10px 20px gray;}50%{box-shadow:3px 4px 7px gray;}100%{box-shadow:8px 10px 20px gray;}"]),S=g(["animation-name:",";animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;"],x),E=g(["animation-name:",";animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;"],k),M=g(["background-color:black;color:white;"]),R=g(["background-color:white;color:black;"]),I=w("button").withConfig({displayName:"common__BasicButton",componentId:"f014th-0"})(["padding:10px;font-size:1em;font-weight:bold;border:2px solid black;border-radius:20px;cursor:pointer;outline:none;",";:active{",";};",";",";",";",";"],R,M,function(e){return e.whiteTextBlackBg&&"\n    ".concat(M,";\n    :active {\n      ").concat(R,"\n    }\n  ")},function(e){return e.levitate&&S},function(e){return e.isClicked&&M},function(e){var t=e.transitionProp;return t&&C(t)}),O=w("input").withConfig({displayName:"common__BasicInputField",componentId:"f014th-1"})(["padding:5px;font-size:1em;font-weight:bold;border-radius:10px;border:2px solid black;outline:none;",";::placeholder{color:",";opacity:1;};:-ms-input-placeholder{color:",";};::-ms-input-placeholder{color:",";};",";"],function(e){return e.levitate&&S},function(e){return e.placeholderColor},function(e){return e.placeholderColor},function(e){return e.placeholderColor},function(e){var t=e.transitionProp;return t&&C(t)}),N=w("div").withConfig({displayName:"common__FlexDiv",componentId:"f014th-2"})(["display:flex;",";",";",";",";",";"],function(e){var t=e.height;return t&&"height: ".concat(t)},function(e){var t=e.width;return t&&"width: ".concat(t)},function(e){var t=e.cssStyle;return t&&"".concat(t)},function(e){return e.fitContainer&&"\n  width: 100%;\n  height: 100%;\n  "},function(e){var t=e.transitionProp;return t&&C(t)}),T=w(N).withConfig({displayName:"common__FlexColumnDiv",componentId:"f014th-3"})(["flex-direction:column;",";",";"],function(e){return e.Hcenter&&"align-items: center"},function(e){return e.Vcenter&&"justify-content: center"}),D=w(N).withConfig({displayName:"common__FlexRowDiv",componentId:"f014th-4"})(["flex-direction:row;",";",";"],function(e){return e.Hcenter&&"justify-content: center"},function(e){return e.Vcenter&&"align-items: center"}),A=w(T).withConfig({displayName:"common__FlexColumnContainer",componentId:"f014th-5"})(["padding:15px;border-radius:10px;border:2px solid black;"]),B=(w(D).withConfig({displayName:"common__FlexRowContainer",componentId:"f014th-6"})(["padding:15px;border-radius:10px;border:2px solid black;"]),w(T).attrs({Hcenter:!0,Vcenter:!0}).withConfig({displayName:"common__CenteringDiv",componentId:"f014th-7"})([""])),G=w("span").withConfig({displayName:"common__ColoredText",componentId:"f014th-8"})(["text-align:center;color:",";display:",";font-weight:",";font-size:",";"],function(e){return e.color},function(e){return e.block&&"block"},function(e){return e.bold&&"bold"},function(e){var t=e.size;return t?"".concat(t):"1.5em"}),F={desktop:992,tablet:768,phone:576},j=["desktop","phone","tablet"].reduce(function(e,t){return e[t]=function(e){return g(["@media (max-width:","em){","}"],F[t]/16,g(e))},e},{});function _(){var e=Object(m.a)(["\n  width: 70%;\n  height: 40%;\n  "]);return _=function(){return e},e}function q(){var e=Object(m.a)(['\n  @import url("https://fonts.googleapis.com/css?family=Montserrat:400,900|Roboto");\n\n  body {\n    padding: 0;\n    margin: 0;\n    font-family: Roboto, sans-serif;\n  }\n']);return q=function(){return e},e}var U=y(q()),V={primaryColor:"white",primaryColorInverted:"black",bgColor:"white",playerOneColor:"red",playerTwoColor:"blue"},H=w(T).withConfig({displayName:"AppStyle__AppWrapper",componentId:"sc-4gcq2h-0"})(["height:100vh;width:100vw;position:relative;"]),L=w(I).withConfig({displayName:"AppStyle__CloseButton",componentId:"sc-4gcq2h-1"})(["position:absolute;right:10px;top:10px;border-radius:100%;"]),W=w(B).attrs({fitContainer:!0}).withConfig({displayName:"AppStyle__PopUpContainer",componentId:"sc-4gcq2h-2"})(["position:absolute;top:0px;left:0px;z-index:1;background-color:rgba(0,0,0,0.3);"]),z=w(B).withConfig({displayName:"AppStyle__PopUp",componentId:"sc-4gcq2h-3"})(["text-align:center;width:30%;height:30%;border-radius:20px;background-color:black;position:relative;padding:10px;",";"],j.phone(_())),J=n(8),Y=n.n(J),Q=n(25);function X(){var e=Object(m.a)(["\n  flex-direction: column;\n  "]);return X=function(){return e},e}var K=w(B).attrs({fitContainer:!0,transitionProp:"background-color"}).withConfig({displayName:"style__MultiPlayer",componentId:"sc-1yzy3q9-0"})([""]),Z=w(T).attrs({Hcenter:!0}).withConfig({displayName:"style__MultiPlayerWrapper",componentId:"sc-1yzy3q9-1"})(["max-width:100%;"]),$=w(D).withConfig({displayName:"style__AvailablePlayersAndRequestsContainer",componentId:"sc-1yzy3q9-2"})(["align-items:center;",";"],j.phone(X())),ee=w(D).withConfig({displayName:"style__JoiningForm",componentId:"sc-1yzy3q9-3"})([""]),te=w(O).attrs({levitate:!0,placeholderColor:"black",transitionProp:"background-color"}).withConfig({displayName:"style__NameInput",componentId:"sc-1yzy3q9-4"})(["margin:0 10px 0 10px;"]),ne=n(40),ae=n.n(ne),oe=w(D).attrs({Vcenter:!0}).withConfig({displayName:"style__AvailablePlayersContainer",componentId:"sc-1ez3ke4-0"})(["flex-wrap:wrap;margin:10px;"]),re=w(I).attrs({whiteTextBlackBg:!0,levitate:function(e){return null===e.isSelected||!0===e.isSelected}}).withConfig({displayName:"style__AvailablePlayer",componentId:"sc-1ez3ke4-1"})(["margin:7px;align-self:flex-start;",";"],function(e){var t=e.isSelected;return null===t?"":!0===t?"\n    box-shadow: 8px 10px 20px gray;\n    font-size: 1.5em;\n  ":"\n    box-shadow: 3px 4px 7px gray;\n    cursor: not-allowed;\n  "});function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var ie=o.a.createElement("circle",{cx:15,cy:15,r:15},o.a.createElement("animate",{attributeName:"r",from:15,to:15,begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"fill-opacity",from:1,to:1,begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),ce=o.a.createElement("circle",{cx:60,cy:15,r:9,fillOpacity:.3},o.a.createElement("animate",{attributeName:"r",from:9,to:9,begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"fill-opacity",from:.5,to:.5,begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),se=o.a.createElement("circle",{cx:105,cy:15,r:15},o.a.createElement("animate",{attributeName:"r",from:15,to:15,begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"fill-opacity",from:1,to:1,begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),ue=function(e){return o.a.createElement("svg",le({width:120,height:30,viewBox:"0 0 120 30",fill:"black"},e),ie,ce,se)},de=(n.p,function(e){var t=e.availablePlayers,n=e.handleAvailablePlayerClick,a=e.selectedAvailablePlayer;return o.a.createElement(o.a.Fragment,null,t.length?o.a.createElement(T,{Hcenter:!0},o.a.createElement(D,{Vcenter:!0,cssStyle:"margin-left: 10px; margin-right: 10px;"},o.a.createElement(G,{bold:!0},"Available players:"),o.a.createElement(oe,null,t.map(function(e){return o.a.createElement(re,{onClick:function(){return n(e)},key:e.socketID,isSelected:a&&a.socketID===e.socketID,disabled:!!a&&a.socketID!==e.socketID},e.name)}))),a?null:o.a.createElement(G,{bold:!0},"Select a player to play with!!!")):o.a.createElement(T,{Hcenter:!0},o.a.createElement(ue,{width:"100",height:"100"}),o.a.createElement(G,{bold:!0},"There are no free players right now, please wait for some time...")))}),me=n(41),pe=w("button").withConfig({displayName:"style__Cell",componentId:"sc-1og3rkq-0"})(["cursor:pointer;width:100px;height:100px;border:2px solid black;outline:none;font-size:3em;background-color:white;",";",";"],E,function(e){return e.isInWinningPosition&&g(["background-color:green;color:white;"])});var he=function(e){return o.a.createElement(pe,{onClick:e.handlePlayerMove,isInWinningPosition:e.isInWinningPosition},e.cellValue)},fe=w(T).withConfig({displayName:"style__Board",componentId:"sc-1lh1lw9-0"})(["position:relative;margin:15px;"]),ge=w(B).attrs({fitContainer:!0}).withConfig({displayName:"style__Overlay",componentId:"sc-1lh1lw9-1"})(["display:none;",";"],function(e){return e.waitForOpponentMove&&"\n  display: flex;\n  background-color: rgba(0, 0, 0, 0.3);\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  "}),ye=w.div.withConfig({displayName:"style__Row",componentId:"sc-1lh1lw9-2"})(["display:flex;"]),ve=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderCell=function(e){var t=n.props.boardState[e],a=!1;return"win"===n.props.gameResult.resultType&&(a=n.props.gameResult.winningCellPositions.includes(e)),o.a.createElement(he,{handlePlayerMove:function(){return n.props.handlePlayerMove(e,!0)},cellValue:t,isInWinningPosition:a})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.gameResult,e.waitForOpponentMove);return o.a.createElement(fe,null,o.a.createElement(ge,{waitForOpponentMove:t},o.a.createElement(ue,{width:"140",height:"50",fill:"white"})),o.a.createElement(ye,null,this.renderCell(0),this.renderCell(1),this.renderCell(2)),o.a.createElement(ye,null,this.renderCell(3),this.renderCell(4),this.renderCell(5)),o.a.createElement(ye,null,this.renderCell(6),this.renderCell(7),this.renderCell(8)))}}]),t}(o.a.Component);function be(){var e=Object(m.a)(["\n    flex-direction: row;\n    max-width: 100%;\n    overflow: scroll;\n    margin-left: 0px;\n  "]);return be=function(){return e},e}function Pe(){var e=Object(m.a)(["\n    flex-direction: column;\n  "]);return Pe=function(){return e},e}var we,Ce,ke=Object(p.default)(D).withConfig({displayName:"style__Game",componentId:"sc-1q32cwj-0"})(["max-width:100%;align-items:center;",""],j.phone(Pe())),xe=Object(p.default)(T).withConfig({displayName:"style__History",componentId:"sc-1q32cwj-1"})(["margin-left:30px;",""],j.phone(be())),Se=p.default.div.withConfig({displayName:"style__Move",componentId:"sc-1q32cwj-2"})(["margin:20px;"]);!function(e){e.X="X",e.O="O"}(we||(we={})),function(e){e.Player1="Player1",e.Player2="Player2"}(Ce||(Ce={}));var Ee=P(function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).togglePlayer=function(e){return e===Ce.Player1?Ce.Player2:Ce.Player1},n.getSymbolOfPlayer=function(e){return n.state[e].symbol},n.recordMoveInHistory=function(e,t){var a=n.state,o=a.history,r=a.moveInHistory,l=new Map(o);if(null===r){var i=l.size+1,c=l.set(i,{nextPlayer:t,boardState:e});n.setState({history:c})}else{var s=r+1,u=l.set(s,{nextPlayer:t,boardState:e});n.setState({history:u,moveInHistory:null})}},n.handlePlayerMove=function(e,t){var a=n.state.nextPlayer,o=n.state,r=o.boardState,l=o.gameResult,i=n.getSymbolOfPlayer(a);if(null===r[e]&&"win"!==l.resultType){t&&n.state.gameMode===je.MultiPlayer&&n.props.sendPlayerMoveCellIDToOpponent(e);var c=r.slice();c[e]=i;var s=n.checkForWinDrawNeither(c,a),u=n.togglePlayer(a);n.setState({boardState:c,nextPlayer:u,gameResult:s}),n.recordMoveInHistory(c,u)}},n.checkForWinDrawNeither=function(e,t){for(var a=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],o=0;o<a.length;o++){var r=Object(me.a)(a[o],3),l=r[0],i=r[1],c=r[2];if(e[l]&&e[l]===e[i]&&e[l]===e[c])return{resultType:"win",winningPlayer:t,winningSymbol:e[l],winningCellPositions:a[o]}}if(n.checkForDraw(e)){return{resultType:"draw"}}return{resultType:"neither"}},n.checkForDraw=function(e){var t=!0,n=!1,a=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){if(null===o.value)return!1}}catch(l){n=!0,a=l}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}return!0},n.goBackToMove=function(e,t){if(0!==e){var a=n.state.history.get(e),o=a.boardState,r=a.nextPlayer,l=n.togglePlayer(r),i=n.checkForWinDrawNeither(o,l);n.setState({boardState:o,nextPlayer:r,moveInHistory:e,gameResult:i})}else{n.setState({boardState:Array(9).fill(null),history:new Map,moveInHistory:null,nextPlayer:Ce.Player1,gameResult:{resultType:"neither"}}),t&&n.state.gameMode===je.MultiPlayer&&n.props.sendRestartSignalToOpponent()}};var a=e.isSelfPlayer1?e.selfName:e.opponentName,o=a===e.selfName?e.opponentName:e.selfName,r=e.isSelfPlayer1?Ce.Player1:Ce.Player2,l=r===Ce.Player1?Ce.Player2:Ce.Player1;return n.state={gameMode:e.gameMode,selfName:e.selfName,opponentName:e.opponentName,selfPlayerType:r,opponentPlayerType:l,Player1:{name:a,symbol:we.X},Player2:{name:o,symbol:we.O},nextPlayer:Ce.Player1,boardState:Array(9).fill(null),moveInHistory:null,history:new Map,gameResult:{resultType:"neither"}},n.colorForSelf=e.isSelfPlayer1?e.theme.playerOneColor:e.theme.playerTwoColor,n.colorForOpponent=n.colorForSelf===e.theme.playerOneColor?e.theme.playerTwoColor:e.theme.playerOneColor,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,n=this.state,a=n.selfName,r=n.nextPlayer,l=n.boardState,i=n.history,c=n.moveInHistory,s=n.gameResult,u=n.opponentName,d=n.selfPlayerType,m=n.opponentPlayerType,p=this.getSymbolOfPlayer(d),h=!1;switch(s.resultType){case"draw":e=o.a.createElement(G,null,"This game a mothafucking draw!");break;case"win":e=s.winningPlayer===d?o.a.createElement(G,{bold:!0},"You ",o.a.createElement(G,{bold:!0},"won")," the match!"):o.a.createElement(G,{bold:!0},"You ",o.a.createElement(G,{bold:!0},"lost")," the match!");break;case"neither":e=(h=r===m)?o.a.createElement(G,{bold:!0},"Waiting for ",o.a.createElement(G,{color:this.colorForOpponent,bold:!0},u)," to make a move..."):o.a.createElement(G,{bold:!0},"Make a move!!")}return o.a.createElement(ke,null,o.a.createElement(T,{Hcenter:!0},o.a.createElement(G,{bold:!0},"You are playing as ",o.a.createElement(G,{bold:!0,color:this.colorForSelf},a)),o.a.createElement(G,{bold:!0},"Against ",o.a.createElement(G,{bold:!0,color:this.colorForOpponent},u)),o.a.createElement(G,{bold:!0},"Your symbol: ",o.a.createElement(G,{bold:!0,color:this.colorForSelf},p))),o.a.createElement(T,{Hcenter:!0},e,o.a.createElement(ve,{gameResult:s,waitForOpponentMove:h,boardState:l,handlePlayerMove:this.handlePlayerMove})),o.a.createElement(xe,null,o.a.createElement(Se,null,o.a.createElement(I,{levitate:!0,onClick:function(){return t.goBackToMove(0,!0)}},"Go to Game start")),Array.from(i.keys()).map(function(e){return o.a.createElement(Se,{key:e},o.a.createElement(I,{levitate:!0,isClicked:c===e,onClick:function(){return t.goBackToMove(e,!0)}},"Go to move #",e))})))}}]),t}(o.a.Component)),Me=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed ","Indigo ","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","WhiteSmoke","Yellow","YellowGreen"],Re=Y.a.mark(function e(){var t;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<Me.length)){e.next=8;break}return e.next=4,Me[t];case 4:(t+=1)===Me.length&&(t=0),e.next=1;break;case 8:case"end":return e.stop()}},e,this)})(),Ie=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.map(function(t){return setInterval(function(e){return function(){e.current&&(e.current.style.backgroundColor=Re.next().value)}}(t),e)})};function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ne,Te=o.a.createElement("rect",{y:10,width:15,height:120,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),De=o.a.createElement("rect",{x:30,y:10,width:15,height:120,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),Ae=o.a.createElement("rect",{x:60,width:15,height:140,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),Be=o.a.createElement("rect",{x:90,y:10,width:15,height:120,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),Ge=o.a.createElement("rect",{x:120,y:10,width:15,height:120,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),Fe=function(e){return o.a.createElement("svg",Oe({width:135,height:140,viewBox:"0 0 135 140",fill:"white"},e),Te,De,Ae,Be,Ge)};n.p;!function(e){e.IncomingTextMessage="IncomingTextMessage",e.OutgoingTextMessage="OutgoingTextMessage"}(Ne||(Ne={}));var je,_e=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).basicButtonRef=o.a.createRef(),n.nameInputRef=o.a.createRef(),n.multiPlayerRef=o.a.createRef(),n.gameComponentChild=o.a.createRef(),n.defaultPlaceholder="Enter player name",n.onErrorPlaceholder="Name cannot be empty",n.opponentName="",n.isInitiator=!1,n.sendQueue=[],n.dataChannel=null,n.selectedAvailablePlayer=null,n.handleInputChange=function(e){var t=e.currentTarget,a=t.name,o=t.value;switch(a){case"playerName":n.setState({selfName:o});break;case"currentOutgoingMessage":n.setState({currentOutgoingTextMessage:o})}},n.handleEnter=function(e){var t=e.currentTarget.name;if("Enter"===e.key)switch(t){case"currentOutgoingMessage":var a={type:Ne.OutgoingTextMessage,value:n.state.currentOutgoingTextMessage};n.sendDataToRemotePeer(a);break;case"playerName":n.handleJoinRoomClick()}},n.handleSendTextMessageButton=function(){var e={type:Ne.OutgoingTextMessage,value:n.state.currentOutgoingTextMessage};n.sendDataToRemotePeer(e)},n.handleJoinRoomClick=function(){""!==n.state.selfName?(n.socket=ae()(n.socketServerAddress,{path:"/xoxo-multiplayer-socketConnectionNamespace"}),n.socket.on("connect",function(){console.log("Client socket is connected ?: ",n.socket.connected),n.registerToSocketEvents(),n.socket.emit("registerNameWithSocket",n.state.selfName,function(e){console.log(e),n.socket.emit("joinAvailablePlayersRoom",function(e){200===e.code?(console.log(e),n.setState({isInAvailablePlayersRoom:!0})):n.props.showPopUp(new Error(e.message))})}),window.location.hostname.match(/localhost|127\.0\.0/)&&n.socket.emit("ipaddr")})):n.setState({placeholderForPlayerNameEle:n.onErrorPlaceholder})},n.registerToSocketEvents=function(){n.socket.on("playersInAvailableRoom",function(e){console.log("Got playersInAvailableRoom : ",e),n.setState({availablePlayers:e})}),n.socket.on("rejectionFromRequestedPlayer",function(e){console.log("".concat(e," rejected the request to play")),n.peerConn.close(),n.dataChannel.close()}),n.socket.on("ipaddr",function(e){console.log("Server IP address is: "+e)}),n.socket.on("log",function(e){return console.log(e)}),n.socket.on("offerFromRemotePlayer",function(e,t,a){console.log("".concat(t," has sent a offer ").concat(JSON.stringify(e)));var o={name:t,socketID:a,offer:e,candidate:null};n.setState(function(e){return{requestsFromPlayers:new Map(e.requestsFromPlayers).set(a,o)}})}),n.socket.on("candidateFromRemotePlayer",function(e,t,a){console.log("".concat(t," (").concat(a,") has sent an ICE candidate ").concat(JSON.stringify(e))),n.isInitiator?n.processSignalFromRemotePeer(e):n.setState(function(t){var n=new Map(t.requestsFromPlayers),o=n.get(a);return o.candidate=e,n.set(a,o),{requestsFromPlayers:n}})}),n.socket.on("answerFromRemotePlayer",function(e,t,a){console.log("".concat(t," (").concat(a,") has sent an answer ").concat(JSON.stringify(e))),n.processSignalFromRemotePeer(e)}),n.socket.on("disconnect",function(e){console.log("Disconnected from signaling Node server: ".concat(e,"."))})},n.sendOfferToRemotePeerViaSignallingServer=function(e){console.log("".concat(n.state.selfName," sending an offer to remote player ").concat(n.selectedAvailablePlayer.name,": ").concat(e)),n.socket.emit("signalOfferToRemotePlayer",e,n.selectedAvailablePlayer.socketID)},n.sendCandidateToRemotePeerViaSignallingServer=function(e){console.log("".concat(n.state.selfName," sending a candidate message to remote player ").concat(n.selectedAvailablePlayer.name,": ").concat(e)),n.socket.emit("signalCandidateToRemotePlayer",e,n.selectedAvailablePlayer.socketID)},n.sendAnswerToRemotePeerViaSignallingServer=function(e){console.log("".concat(n.state.selfName," sending a answer to remote player ").concat(n.selectedAvailablePlayer.name,": ").concat(e)),n.socket.emit("signalAnswerToRemotePlayer",e,n.selectedAvailablePlayer.socketID)},n.processSignalFromRemotePeer=function(){var e=Object(Q.a)(Y.a.mark(function e(t){var a,o,r,l;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="offer"===e.t0?3:"answer"===e.t0?20:"candidate"===e.t0?31:42;break;case 3:return console.log("Got offer"),e.prev=4,a=new RTCSessionDescription(t),e.next=8,n.peerConn.setRemoteDescription(a);case 8:return e.next=10,n.peerConn.createAnswer();case 10:return o=e.sent,e.next=13,n.peerConn.setLocalDescription(o);case 13:n.sendAnswerToRemotePeerViaSignallingServer(n.peerConn.localDescription),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(4),n.props.showPopUp(e.t1);case 19:return e.abrupt("break",44);case 20:return console.log("Got answer."),e.prev=21,r=new RTCSessionDescription(t),e.next=25,n.peerConn.setRemoteDescription(r);case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(21),n.props.showPopUp(e.t2);case 30:return e.abrupt("break",44);case 31:return console.log("Got ice candidate"),e.prev=32,l=new RTCIceCandidate(t.candidate),e.next=36,n.peerConn.addIceCandidate(l);case 36:e.next=41;break;case 38:e.prev=38,e.t3=e.catch(32),n.props.showPopUp(e.t3);case 41:return e.abrupt("break",44);case 42:return n.props.showPopUp(new Error("Got unexpected signal from remote peer.")),e.abrupt("break",44);case 44:case"end":return e.stop()}},e,this,[[4,16],[21,27],[32,38]])}));return function(t){return e.apply(this,arguments)}}(),n.handleICECandidateEvent=function(e){console.log("icecandidate event:",e);var t=e.candidate;if(t){var a={type:"candidate",candidate:t.toJSON()};n.sendCandidateToRemotePeerViaSignallingServer(a)}else console.log("End of candidates.")},n.handleNegotiationNeededEvent=Object(Q.a)(Y.a.mark(function e(){var t;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Creating an offer"),e.next=4,n.peerConn.createOffer();case 4:return t=e.sent,e.next=7,n.peerConn.setLocalDescription(t);case 7:n.sendOfferToRemotePeerViaSignallingServer(n.peerConn.localDescription),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n.props.showPopUp(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])})),n.createPeerConnection=function(e,t){console.log("Creating Peer connection as initiator?",e,"config:",t),n.peerConn=new RTCPeerConnection(t),n.peerConn.onicecandidate=n.handleICECandidateEvent,e?(n.peerConn.onnegotiationneeded=n.handleNegotiationNeededEvent,console.log("Creating Data Channel"),n.dataChannel=n.peerConn.createDataChannel("textMessages"),n.onDataChannelCreated(n.dataChannel),n.forceUpdate()):(console.log("Registering ondatachannel handler"),n.peerConn.ondatachannel=function(e){console.log("Got data channel from remote peer : ",e.channel),n.dataChannel=e.channel,n.onDataChannelCreated(n.dataChannel)})},n.onDataChannelCreated=function(e){console.log("onDataChannelCreated:",e),e.onopen=function(){console.log("Data channel opened!!!"),n.socket=n.socket,n.socket.emit("exitFromAvailablePlayersRoom",function(e){200===e.code?(console.log(e),n.setState({isInAvailablePlayersRoom:!1,availablePlayers:[],requestsFromPlayers:new Map})):n.props.showPopUp(new Error(e.message))})},e.onerror=function(e){console.log("Data channel error",e)},e.onclose=function(){console.log("Data channel closed."),n.state.isInAvailablePlayersRoom?n.forceUpdate():(n.socket=n.socket,n.socket.emit("joinAvailablePlayersRoom",function(e){200===e.code?(console.log(e),n.setState({allTextMessages:[],isInAvailablePlayersRoom:!0}),n.selectedAvailablePlayer=null,n.dataChannel=null):n.props.showPopUp(new Error(e.message))}))},e.onmessage=function(e){console.log("Got payload from data channel!!!");var t=JSON.parse(e.data);switch(t.type){case"PlayerMoveCellID":console.log("got PlayerMoveCellID: ",t.value),n.gameComponentChild.current.handlePlayerMove(t.value,!1);break;case"RestartGame":console.log("Got restart game signal: ",t),n.props.showPopUp("Game has been restarted by ".concat(n.selectedAvailablePlayer.name)),n.gameComponentChild.current.goBackToMove(0,!1);break;case Ne.IncomingTextMessage:n.setState(function(e){return{allTextMessages:e.allTextMessages.concat(t)}})}}},n.invitePlayer=function(){n.isInitiator=!0,n.createPeerConnection(n.isInitiator)},n.handleAvailablePlayerClick=function(e){n.selectedAvailablePlayer=e,console.log(n.selectedAvailablePlayer),n.invitePlayer()},n.sendRejectionResponseToPeers=function(e){n.socket.emit("sendRejectionResponseToPeers",e,function(e){200!==e.code&&n.props.showPopUp(new Error(e.message)),console.log(e.message)})},n.acceptPeerRequest=function(e){var t=n.state.requestsFromPlayers.get(e),a=Array.from(n.state.requestsFromPlayers.keys()).filter(function(t){return t!==e});n.sendRejectionResponseToPeers(a),n.selectedAvailablePlayer={name:t.name,socketID:t.socketID},n.isInitiator=!1,n.createPeerConnection(n.isInitiator),n.processSignalFromRemotePeer(t.offer),n.processSignalFromRemotePeer(t.candidate)},n.sendDataToRemotePeer=function(e){switch(n.dataChannel.readyState){case"connecting":console.log("Connection not open; queueing: "+e),n.sendQueue.push(e);break;case"open":for(console.log("Sending data: ",e),n.sendQueue.push(e);n.sendQueue.length;)n.dataChannel.send(JSON.stringify(n.sendQueue.shift()));e.type===Ne.OutgoingTextMessage&&n.setState(function(t){return{currentOutgoingTextMessage:"",allTextMessages:t.allTextMessages.concat(e)}});break;case"closing":console.log("Attempted to send message while closing: "+e);break;case"closed":console.log("Error! Attempt to send while connection closed.");break;default:console.log("should not happen")}},n.sendPlayerMoveCellIDToOpponent=function(e){var t={type:"PlayerMoveCellID",value:e};n.sendDataToRemotePeer(t)},n.sendRestartSignalToOpponent=function(){n.sendDataToRemotePeer({type:"RestartGame"})},n.handleQuitMatchAndGoBackToAvailablePool=function(){n.dataChannel.close()},n.showViewBasedOnDataChannelState=function(){if(null!==n.dataChannel)switch(n.dataChannel.readyState){case"closed":if(n.state.isInAvailablePlayersRoom)return o.a.createElement(G,null,o.a.createElement(G,{color:"red"},n.selectedAvailablePlayer.name)," has ",o.a.createElement(G,{color:"red"},"REJECTED")," your request to play. Choose another player.");break;case"connecting":return o.a.createElement(T,{Hcenter:!0},o.a.createElement(Fe,{width:"100",height:"100",fill:"white"}),o.a.createElement(G,{bold:!0},"Waiting to hear back from ",o.a.createElement(G,{bold:!0,color:"blue"},n.selectedAvailablePlayer.name)," "))}},n.showGameAndChat=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ee,{gameMode:je.MultiPlayer,ref:n.gameComponentChild,sendPlayerMoveCellIDToOpponent:n.sendPlayerMoveCellIDToOpponent,sendRestartSignalToOpponent:n.sendRestartSignalToOpponent,selfName:n.state.selfName,opponentName:n.selectedAvailablePlayer.name,isSelfPlayer1:n.isInitiator}),o.a.createElement(G,{bold:!0},"Quit match and join the available pool again? ",o.a.createElement(I,{onClick:n.handleQuitMatchAndGoBackToAvailablePool},"Yes")))},n.showAvailablePlayers=function(){var e=n.state.availablePlayers;if(0===e.length)return null;var t=e.filter(function(e){return e.socketID!==n.socket.id});return o.a.createElement(de,{handleAvailablePlayerClick:n.handleAvailablePlayerClick,availablePlayers:t,selectedAvailablePlayer:n.selectedAvailablePlayer})},n.showRequestsFromPlayers=function(){var e=n.state.requestsFromPlayers;if(0!==e.size)return console.log("Got requests!!: ",e),o.a.createElement(A,null,Array.from(e.values()).map(function(e){return null===e.candidate?null:o.a.createElement(D,{key:e.socketID},o.a.createElement(G,null,"Got request from ",o.a.createElement(G,{bold:!0,color:"red"},e.name)),o.a.createElement(I,{levitate:!0,onClick:function(){return n.acceptPeerRequest(e.socketID)}},"Accept"))}))},n.state={selfName:"",currentOutgoingTextMessage:"",placeholderForPlayerNameEle:n.defaultPlaceholder,allTextMessages:[],availablePlayers:[],requestsFromPlayers:new Map,isInAvailablePlayersRoom:!1},n.socketServerAddress="http://apps.sreekar.co",console.log("Using socketServerAddress: ",n.socketServerAddress),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setIntervalIds=Ie(1e3,this.multiPlayerRef,this.nameInputRef,this.basicButtonRef)}},{key:"componentWillUnmount",value:function(){console.log("clearing the setIntervals ",this.setIntervalIds),this.setIntervalIds.forEach(function(e){return clearInterval(e)})}},{key:"render",value:function(){console.log("state in render: ",this.state);var e=this.state,t=e.selfName,n=e.placeholderForPlayerNameEle,a=!1===e.isInAvailablePlayersRoom&&null===this.dataChannel,r=null!==this.dataChannel&&"open"===this.dataChannel.readyState;return console.log("showJoiningForm: ",a),o.a.createElement(K,{ref:this.multiPlayerRef},a?o.a.createElement(ee,null,o.a.createElement(te,{ref:this.nameInputRef,name:"playerName",autoFocus:!0,placeholder:n,onKeyUp:this.handleEnter,onChange:this.handleInputChange,value:t}),o.a.createElement(I,{transitionProp:"background-color",ref:this.basicButtonRef,levitate:!0,onClick:this.handleJoinRoomClick},"Join room")):o.a.createElement(Z,null,r?this.showGameAndChat():o.a.createElement(o.a.Fragment,null,o.a.createElement($,null,o.a.createElement(T,{Hcenter:!0},o.a.createElement(G,{bold:!0},"You are playing as ",o.a.createElement(G,{bold:!0,color:"red"},t)),this.showAvailablePlayers()),this.showRequestsFromPlayers()),this.showViewBasedOnDataChannelState())))}}]),t}(o.a.Component),qe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).centeringDivRef=o.a.createRef(),n.basicButtonARef=o.a.createRef(),n.basicButtonBRef=o.a.createRef(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setIntervalIds=Ie(1e3,this.centeringDivRef,this.basicButtonARef,this.basicButtonBRef)}},{key:"componentWillUnmount",value:function(){console.log("clearing the setIntervals ",this.setIntervalIds),this.setIntervalIds.forEach(function(e){return clearInterval(e)})}},{key:"render",value:function(){var e=this.props.gameModeSelectionButtonHandler;return o.a.createElement(B,{fitContainer:!0,ref:this.centeringDivRef,transitionProp:"background-color"},o.a.createElement(T,{height:"40%",cssStyle:"justify-content: space-evenly;"},o.a.createElement(I,{ref:this.basicButtonARef,transitionProp:"background-color",onClick:function(){return e(je.SinglePlayer)},levitate:!0},"Single Player"),o.a.createElement(I,{ref:this.basicButtonBRef,transitionProp:"background-color",onClick:function(){return e(je.MultiPlayer)},levitate:!0},"Multi Player")))}}]),t}(a.Component);!function(e){e.SinglePlayer="SinglePlayer",e.MultiPlayer="MultiPlayer"}(je||(je={}));var Ue=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this,{}))).showPopUp=function(t){return e.setState({popUpValue:t})},e.closePopUp=function(){return e.setState({popUpValue:null})},e.gameModeSelectionButtonHandler=function(t){return e.setState({gameMode:t})},e.showViewBasedOnGameMode=function(t){switch(t){case je.SinglePlayer:return o.a.createElement(Ee,{gameMode:je.SinglePlayer,opponentName:"Vegana",selfName:"Bob",isSelfPlayer1:!0});case je.MultiPlayer:return o.a.createElement(_e,{showPopUp:e.showPopUp});case null:return o.a.createElement(qe,{gameModeSelectionButtonHandler:e.gameModeSelectionButtonHandler})}},e.popUpView=function(){var t=e.state.popUpValue;return o.a.createElement(W,null,o.a.createElement(z,null,o.a.createElement(L,{onClick:e.closePopUp},"X"),o.a.createElement(G,{color:"white"},t)))},e.state={popUpValue:null,gameMode:null},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.popUpValue,n=e.gameMode;return o.a.createElement(b,{theme:V},o.a.createElement(o.a.Fragment,null,o.a.createElement(U,null),o.a.createElement(H,null,t&&this.popUpView(),this.showViewBasedOnGameMode(n))))}}]),t}(o.a.Component);l.a.render(o.a.createElement(Ue,null),document.getElementById("root"))}},[[43,2,1]]]);
//# sourceMappingURL=main.b775af1a.chunk.js.map