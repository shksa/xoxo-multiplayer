(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,n){e.exports=n.p+"static/media/defaultAvatar.038c96e8.jpeg"},44:function(e,t,n){e.exports=n(82)},79:function(e,t){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(18),i=n.n(r),l=n(3),c=n(4),s=n(6),u=n(5),d=n(7),p=n(8),m=n(9),f=m,h=f.default,g=f.css,y=f.createGlobalStyle,b=f.keyframes,v=f.ThemeProvider,w=f.withTheme,C=h,x=function(e){return g(["transition-property:",";transition-duration:1s;transition-delay:0s;transition-timing-function:ease-in-out;"],e)},P=b(["0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}"]),k="box-shadow: 3px 4px 7px gray;",E=b(["0%{text-shadow:1px 5px 10px black;}50%{text-shadow:1px 2px 5px black;}100%{text-shadow:1px 5px 10px black;}"]),O=b(["0%{box-shadow:8px 10px 20px gray;}50%{box-shadow:3px 4px 7px gray;}100%{box-shadow:8px 10px 20px gray;}"]),I=g(["animation-name:",";animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:ease-in-out;"],P),S=g(["animation-name:",";animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;"],O),R=g(["animation-name:",";animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear;"],E),N=g(["background-color:black;color:white;"]),T=g(["background-color:white;color:black;"]),M=C("button").withConfig({displayName:"common__BasicButton",componentId:"f014th-0"})(["padding:10px;font-size:1em;font-weight:bold;border:2px solid black;border-radius:1em;box-sizing:border-box;cursor:pointer;outline:none;",";",";",";",";",";"],function(e){return e.blackTextAndWhiteBackground&&"\n    ".concat(T,";  \n    :active {\n      ").concat(N,";\n    }\n  ")},function(e){return e.whiteTextAndBlackBackground&&"\n    ".concat(N,";\n    :active {\n      ").concat(T,"\n    }\n  ")},function(e){return e.levitate&&S},function(e){return e.isClicked&&N},function(e){var t=e.transitionProp;return t&&x(t)}),j=C("input").withConfig({displayName:"common__BasicInputField",componentId:"f014th-1"})(["padding:5px;font-size:1em;font-weight:bold;border-radius:10px;border:2px solid black;",";",";outline:none;",";::placeholder{color:",";opacity:1;};:-ms-input-placeholder{color:",";};::-ms-input-placeholder{color:",";};",";"],function(e){return e.whiteTextAndBlackBackground&&N},function(e){return e.blackTextAndWhiteBackground&&T},function(e){return e.levitate&&S},function(e){return e.placeholderColor},function(e){return e.placeholderColor},function(e){return e.placeholderColor},function(e){var t=e.transitionProp;return t&&x(t)}),A=C("div").withConfig({displayName:"common__FlexDiv",componentId:"f014th-2"})(["display:flex;box-sizing:border-box;",";",";",";",";",";",";",";"],function(e){var t=e.height;return t&&"height: ".concat(t)},function(e){var t=e.width;return t&&"width: ".concat(t)},function(e){var t=e.cssStyle;return t&&"".concat(t)},function(e){return e.fitContainer&&"\n  width: 100%;\n  height: 100%;\n  "},function(e){return e.limitSizeToContainer&&"\n  max-width: 100%;\n  max-height: 100%;\n  "},function(e){return e.levitate&&S},function(e){var t=e.transitionProp;return t&&x(t)}),_=C(A).withConfig({displayName:"common__FlexColumnDiv",componentId:"f014th-3"})(["flex-direction:column;",";",";"],function(e){return e.Hcenter&&"align-items: center"},function(e){return e.Vcenter&&"justify-content: center"}),D=C(A).withConfig({displayName:"common__FlexRowDiv",componentId:"f014th-4"})(["flex-direction:row;",";",";"],function(e){return e.Hcenter&&"justify-content: center"},function(e){return e.Vcenter&&"align-items: center"}),F=(C(_).withConfig({displayName:"common__FlexColumnContainer",componentId:"f014th-5"})(["padding:15px;border-radius:10px;border:2px solid black;"]),C(D).withConfig({displayName:"common__FlexRowContainer",componentId:"f014th-6"})(["padding:15px;border-radius:10px;border:2px solid black;"]),C(D).attrs({Hcenter:!0,Vcenter:!0}).withConfig({displayName:"common__CenteringDiv",componentId:"f014th-7"})([""])),q=C("span").withConfig({displayName:"common__ColoredText",componentId:"f014th-8"})(["text-align:center;color:",";display:",";font-weight:",";font-size:",";",";"],function(e){var t=e.color;return t||"white"},function(e){return e.block&&"block"},function(e){return e.bold&&"bold"},function(e){var t=e.size;return t?"".concat(t):"1.5em"},function(e){return e.levitateText&&R}),U={desktop:992,tablet:768,phone:576},B=["desktop","phone","tablet"].reduce(function(e,t){return e[t]=function(e){return g(["@media (max-width:","em){","}"],U[t]/16,g(e))},e},{});function z(){var e=Object(p.a)(["\n  width: 70%;\n  height: 40%;\n  "]);return z=function(){return e},e}function V(){var e=Object(p.a)(["\n  flex-direction: column;\n  "]);return V=function(){return e},e}function G(){var e=Object(p.a)(['\n  @import url("https://fonts.googleapis.com/css?family=Montserrat:400,900|Roboto");\n\n  body {\n    padding: 0;\n    margin: 0;\n    font-family: Roboto, sans-serif;\n  }\n']);return G=function(){return e},e}var H=y(G()),W={primaryColor:"white",primaryColorInverted:"black",bgColor:"white",playerOneColor:"#eb4d4b",playerTwoColor:"#0984e3"},J=C(D).withConfig({displayName:"AppStyle__AppWrapper",componentId:"sc-4gcq2h-0"})(["height:100vh;width:100vw;position:relative;",";"],B.phone(V())),Q=C(M).withConfig({displayName:"AppStyle__CloseButton",componentId:"sc-4gcq2h-1"})(["position:absolute;right:10px;top:10px;border-radius:100%;"]),X=C(F).attrs({fitContainer:!0}).withConfig({displayName:"AppStyle__PopUpContainer",componentId:"sc-4gcq2h-2"})(["position:absolute;top:0px;left:0px;z-index:1;background-color:rgba(0,0,0,0.3);"]),L=C(F).withConfig({displayName:"AppStyle__PopUp",componentId:"sc-4gcq2h-3"})(["text-align:center;width:30%;height:30%;border-radius:20px;background-color:black;position:relative;padding:10px;",";"],B.phone(z())),Y=n(19),K=n(1),Z=n.n(K),$=n(12);function ee(){var e=Object(p.a)(["\n  width: 100%;\n  "]);return ee=function(){return e},e}function te(){var e=Object(p.a)(["\n  flex-direction: column;\n  "]);return te=function(){return e},e}var ne=C(F).attrs({transitionProp:"background-color",fitContainer:!0}).withConfig({displayName:"style__MultiPlayer",componentId:"sc-1yzy3q9-0"})(["position:relative;padding:0.9em;",";"],B.phone(te())),ae=C.img.withConfig({displayName:"style__Avatar",componentId:"sc-1yzy3q9-1"})(["box-sizing:border-box;height:200px;width:200px;border:5px solid black;border-radius:100%;",";"],I),oe=C(_).attrs({Hcenter:!0}).withConfig({displayName:"style__AvatarAndTextContainer",componentId:"sc-1yzy3q9-2"})([""]),re=C(D).withConfig({displayName:"style__JoiningForm",componentId:"sc-1yzy3q9-3"})([""]),ie=C(j).attrs({levitate:!0,placeholderColor:"white",whiteTextAndBlackBackground:!0}).withConfig({displayName:"style__NameInput",componentId:"sc-1yzy3q9-4"})(["margin-right:10px;"]),le=C(_).withConfig({displayName:"style__AvailablePlayersAndWaitingAndRequestsContainer",componentId:"sc-1yzy3q9-5"})(["position:relative;overflow:scroll;padding:1em;width:40%;max-height:50%;",";"],B.phone(ee())),ce=(C(F).attrs({fitContainer:!0}).withConfig({displayName:"style__RequestsAndWaitAndRejectionWrapper",componentId:"sc-1yzy3q9-6"})(["position:absolute;background-color:light"]),n(41)),se=n.n(ce),ue=C(D).attrs({}).withConfig({displayName:"style__Player",componentId:"sc-1w3aj69-0"})(["background-color:",";color:white;font-size:1.3em;padding:0.3em 0.4em;border-radius:0.5em;margin-right:0.3em;",";"],function(e){return e.backgroundColor},k),de=C.img.withConfig({displayName:"style__AvailablePlayerAvatar",componentId:"sc-1w3aj69-1"})(["height:2.3em;width:2.3em;box-sizing:border-box;border-radius:100%;border:2px solid black;margin-right:1em;",";",";"],k,I),pe=C(D).attrs({Vcenter:!0}).withConfig({displayName:"style__PlayerLine",componentId:"sc-1w3aj69-2"})(["margin:0.5em 0;justify-self:flex-start;justify-content:space-between;"]),me=C(M).attrs({levitate:!0}).withConfig({displayName:"style__InviteOrAcceptorRejectButton",componentId:"sc-1w3aj69-3"})(["background-color:",";color:white;font-size:1.1em;padding:0.3em 0.4em;border-radius:0.5em;border:none;",";"],function(e){switch(e.actionType){case"disabled":return"grey";case"accept":return"#33cc66";case"invite":return"#6c5ce7";case"reject":return"#FC4445"}},function(e){return"disabled"===e.actionType&&"\n  cursor: not-allowed;\n  "}),fe=C(D).withConfig({displayName:"style__BarsLoaderWrapper",componentId:"sc-1w3aj69-4"})(["margin-right:0.6em;height:2.2em;width:2.2em;"]);function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var ge=o.a.createElement("circle",{cx:15,cy:15,r:15},o.a.createElement("animate",{attributeName:"r",from:15,to:15,begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"fill-opacity",from:1,to:1,begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),ye=o.a.createElement("circle",{cx:60,cy:15,r:9,fillOpacity:.3},o.a.createElement("animate",{attributeName:"r",from:9,to:9,begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"fill-opacity",from:.5,to:.5,begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),be=o.a.createElement("circle",{cx:105,cy:15,r:15},o.a.createElement("animate",{attributeName:"r",from:15,to:15,begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"fill-opacity",from:1,to:1,begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),ve=function(e){return o.a.createElement("svg",he({width:120,height:30,viewBox:"0 0 120 30",fill:"black"},e),ge,ye,be)};n.p;function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ce=o.a.createElement("rect",{y:10,width:15,height:120,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),xe=o.a.createElement("rect",{x:30,y:10,width:15,height:120,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),Pe=o.a.createElement("rect",{x:60,width:15,height:140,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),ke=o.a.createElement("rect",{x:90,y:10,width:15,height:120,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),Ee=o.a.createElement("rect",{x:120,y:10,width:15,height:120,rx:6},o.a.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),Oe=function(e){return o.a.createElement("svg",we({width:135,height:140,viewBox:"0 0 135 140",fill:"white"},e),Ce,xe,Pe,ke,Ee)};n.p;function Ie(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}}var Se=["#edd9c0","#c9d8c5","#a8b6bf","#7d4627","#6ed3cf","#9068be","#e62739","#9ad3de","#89bdd3","#fae596","#3fb0ac","#173e43","#e6cf8b","#b56969","#22264b","#98dafc","#daad86","#312c32","#1d2120","#5a5c51","#ba9077","#bcd5d1","#729f98","#283018","#aa863a","#c2d4d8","#b0aac2","#6534ff","#62bcfa","#fccdd3","#bbc4ef","#dbc3d0","#5e0231","#c7a693","#856046","#e6af4b","#e05038","#f2cbbc","#334431","#300032","#06000a","#c43235","#16174f","#963019","#262216","#97743a","#30231d","#c7ad88","#935347","#252839","#f2b632","#bccbde","#c2dde6","#e6e9f0","#431c5d","#e05915","#cdd422"],Re=Z.a.mark(function e(t){var n;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,Ie(t);case 2:if(!(n<t.length)){e.next=9;break}return e.next=5,t[n];case 5:(n+=1)===t.length&&(n=0,Ie(t)),e.next=2;break;case 9:case"end":return e.stop()}},e,this)})(Se),Ne=function(){return Re.next().value},Te=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.map(function(t){return setInterval(function(e){return function(){e.current&&(e.current.style.backgroundColor=Ne())}}(t),e)})},Me=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.availablePlayers,n=e.rejectPlayerRequest,a=e.acceptPlayerRequest,r=e.connectionStatus,i=e.invitePlayer,l=e.requests;return o.a.createElement(o.a.Fragment,null,t.length?o.a.createElement(o.a.Fragment,null,t.map(function(e){return o.a.createElement(pe,{key:e.socketID},o.a.createElement(D,{Vcenter:!0},o.a.createElement(de,{src:e.avatar}),o.a.createElement(ue,{backgroundColor:Ne()},e.name),o.a.createElement(q,{size:"1.3em",color:"white",bold:!0},"joined")),r?r.socketID===e.socketID&&"connecting"===r.status?o.a.createElement(fe,null,o.a.createElement(Oe,{width:"100%",height:"100%"})):o.a.createElement(me,{actionType:"disabled"},"Invite"):l.has(e.socketID)?o.a.createElement(D,null,o.a.createElement(me,{actionType:"accept",onClick:function(){return a(e)}},"Accept"),o.a.createElement(me,{actionType:"reject",onClick:function(){return n(e)}},"Reject")):o.a.createElement(me,{actionType:"invite",onClick:function(){return i(e)}},"Invite"))})):o.a.createElement(_,{Hcenter:!0},o.a.createElement(ve,{width:"100",height:"100"}),o.a.createElement(q,{bold:!0},"There are no free players right now, please wait for some time...")))}}]),t}(o.a.Component),je=C("button").withConfig({displayName:"style__Cell",componentId:"sc-1og3rkq-0"})(["cursor:pointer;width:100px;height:100px;border:2px solid black;outline:none;font-size:3em;background-color:white;",";",";"],R,function(e){return e.isInWinningPosition&&g(["background-color:green;color:white;"])});var Ae=function(e){return o.a.createElement(je,{onClick:e.handlePlayerMove,isInWinningPosition:e.isInWinningPosition},e.cellValue)},_e=C(_).withConfig({displayName:"style__Board",componentId:"sc-1lh1lw9-0"})(["position:relative;margin:15px;"]),De=C(F).attrs({fitContainer:!0}).withConfig({displayName:"style__Overlay",componentId:"sc-1lh1lw9-1"})(["display:none;",";"],function(e){return e.waitForOpponentMove&&"\n  display: flex;\n  background-color: rgba(0, 0, 0, 0.3);\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  "}),Fe=C.div.withConfig({displayName:"style__Row",componentId:"sc-1lh1lw9-2"})(["display:flex;"]),qe=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderCell=function(e){var t=n.props.boardState[e],a=!1;return"win"===n.props.gameResult.resultType&&(a=n.props.gameResult.winningCellPositions.includes(e)),o.a.createElement(Ae,{handlePlayerMove:function(){return n.props.handlePlayerMove(e,!0)},cellValue:t,isInWinningPosition:a})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.gameResult,e.waitForOpponentMove);return o.a.createElement(_e,null,o.a.createElement(De,{waitForOpponentMove:t},o.a.createElement(ve,{width:"140",height:"50",fill:"white"})),o.a.createElement(Fe,null,this.renderCell(0),this.renderCell(1),this.renderCell(2)),o.a.createElement(Fe,null,this.renderCell(3),this.renderCell(4),this.renderCell(5)),o.a.createElement(Fe,null,this.renderCell(6),this.renderCell(7),this.renderCell(8)))}}]),t}(o.a.Component);function Ue(){var e=Object(p.a)(["\n    flex-direction: row;\n    max-width: 100%;\n    margin-left: 0px;\n  "]);return Ue=function(){return e},e}function Be(){var e=Object(p.a)(["\n    flex-direction: column;\n    max-width: 100%;\n  "]);return Be=function(){return e},e}var ze,Ve,Ge=Object(m.default)(D).withConfig({displayName:"style__Game",componentId:"sc-1q32cwj-0"})(["align-items:center;",""],B.phone(Be())),He=Object(m.default)(_).withConfig({displayName:"style__History",componentId:"sc-1q32cwj-1"})(["margin-left:30px;max-height:50%;overflow:scroll;",""],B.phone(Ue())),We=Object(m.default)(M).withConfig({displayName:"style__Move",componentId:"sc-1q32cwj-2"})(["margin:20px;background-color:white;"]),Je=m.default.img.withConfig({displayName:"style__Avatar",componentId:"sc-1q32cwj-3"})(["border-radius:100%;border:2px solid black;box-sizing:border-box;width:6em;height:6em;"]);!function(e){e.X="X",e.O="O"}(ze||(ze={})),function(e){e.Player1="Player1",e.Player2="Player2"}(Ve||(Ve={}));var Qe,Xe=w(function(e){function t(e){var n;Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).togglePlayer=function(e){return e===Ve.Player1?Ve.Player2:Ve.Player1},n.getSymbolOfPlayer=function(e){return n[e].symbol},n.recordMoveInHistory=function(e,t){var a=n.state,o=a.history,r=a.moveInHistory,i=new Map(o);if(null===r){var l=i.size+1,c=i.set(l,{nextPlayer:t,boardState:e});n.setState({history:c})}else{var s=r+1,u=i.set(s,{nextPlayer:t,boardState:e});n.setState({history:u,moveInHistory:null})}},n.handlePlayerMove=function(e,t){var a=n.state.nextPlayer,o=n.state,r=o.boardState,i=o.gameResult,l=n.getSymbolOfPlayer(a);if(null===r[e]&&"win"!==i.resultType){t&&n.gameMode===Ke.MultiPlayer&&n.props.sendPlayerMoveCellIDToOpponent(e);var c=r.slice();c[e]=l;var s=n.checkForWinDrawNeither(c,a),u=n.togglePlayer(a);n.setState({boardState:c,nextPlayer:u,gameResult:s}),n.recordMoveInHistory(c,u)}},n.checkForWinDrawNeither=function(e,t){for(var a=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],o=0;o<a.length;o++){var r=Object(Y.a)(a[o],3),i=r[0],l=r[1],c=r[2];if(e[i]&&e[i]===e[l]&&e[i]===e[c])return{resultType:"win",winningPlayer:t,winningSymbol:e[i],winningCellPositions:a[o]}}if(n.checkForDraw(e)){return{resultType:"draw"}}return{resultType:"neither"}},n.checkForDraw=function(e){var t=!0,n=!1,a=void 0;try{for(var o,r=e[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){if(null===o.value)return!1}}catch(i){n=!0,a=i}finally{try{t||null==r.return||r.return()}finally{if(n)throw a}}return!0},n.goBackToMove=function(e,t){if(0!==e){var a=n.state.history.get(e),o=a.boardState,r=a.nextPlayer,i=n.togglePlayer(r),l=n.checkForWinDrawNeither(o,i);n.setState({boardState:o,nextPlayer:r,moveInHistory:e,gameResult:l})}else{n.setState({boardState:Array(9).fill(null),history:new Map,moveInHistory:null,nextPlayer:Ve.Player1,gameResult:{resultType:"neither"}}),t&&n.gameMode===Ke.MultiPlayer&&n.props.sendRestartSignalToOpponent()}},n.gameMode=e.gameMode,n.selfName=e.selfName,n.opponentName=e.opponentName,n.selfAvatar=e.selfAvatar,n.opponentAvatar=e.opponentAvatar;var a=e.isSelfPlayer1?e.selfName:e.opponentName;n.symbolOfSelf=e.isSelfPlayer1?ze.X:ze.O,n.symbolOfOpponent=n.symbolOfSelf===ze.X?ze.O:ze.X;var o=a===e.selfName?e.opponentName:e.selfName;n.Player1={name:a,symbol:ze.X},n.Player2={name:o,symbol:ze.O},n.selfPlayerType=e.isSelfPlayer1?Ve.Player1:Ve.Player2,n.opponentPlayerType=n.selfPlayerType===Ve.Player1?Ve.Player2:Ve.Player1;return n.state={nextPlayer:Ve.Player1,boardState:Array(9).fill(null),moveInHistory:null,history:new Map,gameResult:{resultType:"neither"}},n.colorForSelf=e.isSelfPlayer1?e.theme.playerOneColor:e.theme.playerTwoColor,n.colorForOpponent=n.colorForSelf===e.theme.playerOneColor?e.theme.playerTwoColor:e.theme.playerOneColor,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this,n=this.state,a=n.nextPlayer,r=n.boardState,i=n.history,l=n.moveInHistory,c=n.gameResult,s=this.selfPlayerType,u=this.opponentPlayerType,d=this.colorForSelf,p=this.symbolOfSelf,m=this.symbolOfOpponent,f=this.colorForOpponent,h=(this.selfName,this.selfAvatar),g=this.opponentAvatar,y=this.opponentName,b=!1;switch(c.resultType){case"draw":e=o.a.createElement(q,null,"This game a mothafucking draw!");break;case"win":e=c.winningPlayer===s?o.a.createElement(q,{bold:!0},"You ",o.a.createElement(q,{bold:!0},"won")," the match!"):o.a.createElement(q,{bold:!0},"You ",o.a.createElement(q,{bold:!0},"lost")," the match!");break;case"neither":e=(b=a===u)?o.a.createElement(q,{bold:!0},"Waiting for ",o.a.createElement(q,{color:this.colorForOpponent,bold:!0},y)," to make a move..."):o.a.createElement(q,{bold:!0},"Make a move!!")}return o.a.createElement(Ge,null,o.a.createElement(D,null,o.a.createElement(_,{Hcenter:!0},o.a.createElement(Je,{src:h}),o.a.createElement(q,{bold:!0,color:d},"You - ",p)),o.a.createElement(_,{cssStyle:"margin: 0em 1.5em; padding-top: 2.5em;"},o.a.createElement(q,{bold:!0},"VS")),o.a.createElement(_,{Hcenter:!0},o.a.createElement(Je,{src:g}),o.a.createElement(q,{bold:!0,color:f},y," - ",m))),o.a.createElement(_,{Hcenter:!0},o.a.createElement(F,{height:"6em"},e),o.a.createElement(qe,{gameResult:c,waitForOpponentMove:b,boardState:r,handlePlayerMove:this.handlePlayerMove})),o.a.createElement(He,null,o.a.createElement(We,null,o.a.createElement(M,{levitate:!0,onClick:function(){return t.goBackToMove(0,!0)}},"Go to Game start")),Array.from(i.keys()).map(function(e){return o.a.createElement(We,{key:e,levitate:!0,isClicked:l===e,onClick:function(){return t.goBackToMove(e,!0)}},"Go to move #",e)})))}}]),t}(o.a.Component)),Le=n(42),Ye=n.n(Le);!function(e){e.IncomingTextMessage="IncomingTextMessage",e.OutgoingTextMessage="OutgoingTextMessage"}(Qe||(Qe={}));var Ke,Ze=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).basicButtonRef=o.a.createRef(),n.nameInputRef=o.a.createRef(),n.multiPlayerRef=o.a.createRef(),n.gameComponentChild=o.a.createRef(),n.defaultPlaceholder="Enter player name",n.onErrorPlaceholder="Name cannot be empty",n.opponentName="",n.isInitiator=!1,n.sendQueue=[],n.dataChannel=null,n.selectedOpponent=null,n.defaultAvatarImage=Ye.a,n.handleInputChange=function(e){var t=e.currentTarget,a=t.name,o=t.value;switch(a){case"playerName":n.setState({selfName:o});break;case"currentOutgoingMessage":n.setState({currentOutgoingTextMessage:o})}},n.handleEnter=function(e){var t=e.currentTarget.name;if("Enter"===e.key)switch(t){case"currentOutgoingMessage":var a={type:Qe.OutgoingTextMessage,value:n.state.currentOutgoingTextMessage};n.sendDataToRemotePeer(a);break;case"playerName":n.handleJoinRoomClick()}},n.handleSendTextMessageButton=function(){var e={type:Qe.OutgoingTextMessage,value:n.state.currentOutgoingTextMessage};n.sendDataToRemotePeer(e)},n.getAvatarBasedOnUserName=function(){var e=Object($.a)(Z.a.mark(function e(t){var a,o,r;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.avatarServerAddress,"/getRandomAvatarBasedOnUniqueUserID?userID=").concat(t));case 2:if((a=e.sent).ok){e.next=5;break}throw Error("could not connect to the server.");case 5:if(200===a.status){e.next=7;break}throw Error("status code: ".concat(a.clone,", status message: ").concat(a.statusText));case 7:return e.next=9,a.blob();case 9:return o=e.sent,r=URL.createObjectURL(o),e.abrupt("return",r);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleJoinRoomClick=Object($.a)(Z.a.mark(function e(){var t,a;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.state.selfName){e.next=3;break}return n.setState({placeholderForPlayerNameEle:n.onErrorPlaceholder}),e.abrupt("return");case 3:return t=n.state.selfName,e.prev=4,e.next=7,n.getAvatarBasedOnUserName(t);case 7:a=e.sent,console.log("base64img: ",a),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),a=n.defaultAvatarImage,n.props.showPopUp(JSON.stringify(e.t0));case 15:n.setState({avatarImage:a}),n.socket=se()(n.socketServerAddress,{path:"/xoxo-multiplayer-socketConnectionNamespace"}),n.socket.on("connect",function(){console.log("Client socket is connected ?: ",n.socket.connected),n.registerToSocketEvents(),n.socket.emit("registerNameAndAvatarWithSocket",t,a,function(e){console.log(e),n.socket.emit("joinAvailablePlayersRoom",function(e){200===e.code?(console.log(e),n.setState({isInAvailablePlayersRoom:!0})):n.props.showPopUp(new Error(e.message))})})});case 18:case"end":return e.stop()}},e,this,[[4,11]])})),n.registerToSocketEvents=function(){n.socket.on("playersInAvailableRoom",function(e){console.log("Got playersInAvailableRoom : ",e),n.setState({availablePlayers:e})}),n.socket.on("rejectionFromRequestedPlayer",function(e){console.log("".concat(e," rejected the request to play")),n.peerConn.close(),n.dataChannel.close()}),n.socket.on("ipaddr",function(e){console.log("Server IP address is: "+e)}),n.socket.on("log",function(e){return console.log(e)}),n.socket.on("offerFromRemotePlayer",function(e,t,a){console.log("".concat(t," has sent a offer ").concat(JSON.stringify(e)));var o={name:t,socketID:a,offer:e,candidate:null};n.setState(function(e){return{requestsFromPlayers:new Map(e.requestsFromPlayers).set(a,o)}})}),n.socket.on("candidateFromRemotePlayer",function(e,t,a){console.log("".concat(t," (").concat(a,") has sent an ICE candidate ").concat(JSON.stringify(e))),n.isInitiator?n.processSignalFromRemotePeer(e):n.setState(function(t){var n=new Map(t.requestsFromPlayers),o=n.get(a);return o.candidate=e,n.set(a,o),{requestsFromPlayers:n}})}),n.socket.on("answerFromRemotePlayer",function(e,t,a){console.log("".concat(t," (").concat(a,") has sent an answer ").concat(JSON.stringify(e))),n.processSignalFromRemotePeer(e)}),n.socket.on("disconnect",function(e){console.log("Disconnected from signaling Node server: ".concat(e,"."))})},n.sendOfferToRemotePeerViaSignallingServer=function(e){console.log("".concat(n.state.selfName," sending an offer to remote player ").concat(n.selectedOpponent.name,": ").concat(e)),n.socket.emit("signalOfferToRemotePlayer",e,n.selectedOpponent.socketID)},n.sendCandidateToRemotePeerViaSignallingServer=function(e){console.log("".concat(n.state.selfName," sending a candidate message to remote player ").concat(n.selectedOpponent.name,": ").concat(e)),n.socket.emit("signalCandidateToRemotePlayer",e,n.selectedOpponent.socketID)},n.sendAnswerToRemotePeerViaSignallingServer=function(e){console.log("".concat(n.state.selfName," sending a answer to remote player ").concat(n.selectedOpponent.name,": ").concat(e)),n.socket.emit("signalAnswerToRemotePlayer",e,n.selectedOpponent.socketID)},n.processSignalFromRemotePeer=function(){var e=Object($.a)(Z.a.mark(function e(t){var a,o,r,i;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="offer"===e.t0?3:"answer"===e.t0?20:"candidate"===e.t0?31:42;break;case 3:return console.log("Got offer"),e.prev=4,a=new RTCSessionDescription(t),e.next=8,n.peerConn.setRemoteDescription(a);case 8:return e.next=10,n.peerConn.createAnswer();case 10:return o=e.sent,e.next=13,n.peerConn.setLocalDescription(o);case 13:n.sendAnswerToRemotePeerViaSignallingServer(n.peerConn.localDescription),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(4),n.props.showPopUp(e.t1);case 19:return e.abrupt("break",44);case 20:return console.log("Got answer."),e.prev=21,r=new RTCSessionDescription(t),e.next=25,n.peerConn.setRemoteDescription(r);case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(21),n.props.showPopUp(e.t2);case 30:return e.abrupt("break",44);case 31:return console.log("Got ice candidate"),e.prev=32,i=new RTCIceCandidate(t.candidate),e.next=36,n.peerConn.addIceCandidate(i);case 36:e.next=41;break;case 38:e.prev=38,e.t3=e.catch(32),n.props.showPopUp(e.t3);case 41:return e.abrupt("break",44);case 42:return n.props.showPopUp(new Error("Got unexpected signal from remote peer.")),e.abrupt("break",44);case 44:case"end":return e.stop()}},e,this,[[4,16],[21,27],[32,38]])}));return function(t){return e.apply(this,arguments)}}(),n.handleICECandidateEvent=function(e){console.log("icecandidate event:",e);var t=e.candidate;if(t){var a={type:"candidate",candidate:t.toJSON()};n.sendCandidateToRemotePeerViaSignallingServer(a)}else console.log("End of candidates.")},n.handleNegotiationNeededEvent=Object($.a)(Z.a.mark(function e(){var t;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Creating an offer"),e.next=4,n.peerConn.createOffer();case 4:return t=e.sent,e.next=7,n.peerConn.setLocalDescription(t);case 7:n.sendOfferToRemotePeerViaSignallingServer(n.peerConn.localDescription),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n.props.showPopUp(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])})),n.createPeerConnection=function(e,t){console.log("Creating Peer connection as initiator?",e,"config:",t),n.peerConn=new RTCPeerConnection(t),n.peerConn.onicecandidate=n.handleICECandidateEvent,e?(n.peerConn.onnegotiationneeded=n.handleNegotiationNeededEvent,console.log("Creating Data Channel"),n.dataChannel=n.peerConn.createDataChannel("textMessages"),n.onDataChannelCreated(n.dataChannel),n.setState({connectionStatus:{socketID:n.selectedOpponent.socketID,status:"connecting"}})):(console.log("Registering ondatachannel handler"),n.peerConn.ondatachannel=function(e){console.log("Got data channel from remote peer : ",e.channel),n.dataChannel=e.channel,n.onDataChannelCreated(n.dataChannel)})},n.onDataChannelCreated=function(e){console.log("onDataChannelCreated:",e),e.onopen=function(){console.log("Data channel opened!!!"),n.socket=n.socket,n.socket.emit("exitFromAvailablePlayersRoom",function(e){200===e.code?(console.log(e),n.setState({isInAvailablePlayersRoom:!1,connectionStatus:{socketID:n.selectedOpponent.name,status:"open"}})):n.props.showPopUp(new Error(e.message))})},e.onerror=function(e){console.log("Data channel error",e)},e.onclose=function(){if(console.log("Data channel closed."),n.state.isInAvailablePlayersRoom)return n.props.showPopUp("".concat(n.selectedOpponent.name," rejected your invite")),n.selectedOpponent=null,n.dataChannel=null,void n.setState({connectionStatus:null});n.socket=n.socket,n.socket.emit("joinAvailablePlayersRoom",function(e){200===e.code?(console.log(e),n.setState({allTextMessages:[],isInAvailablePlayersRoom:!0}),n.selectedOpponent=null):n.props.showPopUp(new Error(e.message))})},e.onmessage=function(e){console.log("Got payload from data channel!!!");var t=JSON.parse(e.data);switch(t.type){case"PlayerMoveCellID":console.log("got PlayerMoveCellID: ",t.value),n.gameComponentChild.current.handlePlayerMove(t.value,!1);break;case"RestartGame":console.log("Got restart game signal: ",t),n.props.showPopUp("Game has been restarted by ".concat(n.selectedOpponent.name)),n.gameComponentChild.current.goBackToMove(0,!1);break;case Qe.IncomingTextMessage:n.setState(function(e){return{allTextMessages:e.allTextMessages.concat(t)}})}}},n.invitePlayer=function(e){n.selectedOpponent=e,console.log(n.selectedOpponent),n.isInitiator=!0,n.createPeerConnection(n.isInitiator)},n.sendRejectionResponseToPeers=function(e){n.socket.emit("sendRejectionResponseToPeers",e,function(t){200!==t.code&&n.props.showPopUp(new Error(t.message)),console.log(t.message),n.setState(function(t){var n=new Map(t.requestsFromPlayers);return e.forEach(function(e){return n.delete(e)}),{requestsFromPlayers:n}})})},n.rejectPlayerRequest=function(e){n.sendRejectionResponseToPeers([e.socketID])},n.acceptPlayerRequest=function(e){var t=n.state.requestsFromPlayers.get(e.socketID),a=Array.from(n.state.requestsFromPlayers.keys()).filter(function(t){return t!==e.socketID});n.sendRejectionResponseToPeers(a),n.selectedOpponent=e,n.isInitiator=!1,n.createPeerConnection(n.isInitiator),n.processSignalFromRemotePeer(t.offer),n.processSignalFromRemotePeer(t.candidate)},n.sendDataToRemotePeer=function(e){switch(n.dataChannel.readyState){case"connecting":console.log("Connection not open; queueing: "+e),n.sendQueue.push(e);break;case"open":for(console.log("Sending data: ",e),n.sendQueue.push(e);n.sendQueue.length;)n.dataChannel.send(JSON.stringify(n.sendQueue.shift()));e.type===Qe.OutgoingTextMessage&&n.setState(function(t){return{currentOutgoingTextMessage:"",allTextMessages:t.allTextMessages.concat(e)}});break;case"closing":console.log("Attempted to send message while closing: "+e);break;case"closed":console.log("Error! Attempt to send while connection closed.");break;default:console.log("should not happen")}},n.sendPlayerMoveCellIDToOpponent=function(e){var t={type:"PlayerMoveCellID",value:e};n.sendDataToRemotePeer(t)},n.sendRestartSignalToOpponent=function(){n.sendDataToRemotePeer({type:"RestartGame"})},n.handleQuitMatchAndGoBackToAvailablePool=function(){n.dataChannel.close()},n.showGameAndChat=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(_,{Hcenter:!0,limitSizeToContainer:!0,cssStyle:"overflow: scroll;"},o.a.createElement(Xe,{gameMode:Ke.MultiPlayer,ref:n.gameComponentChild,sendPlayerMoveCellIDToOpponent:n.sendPlayerMoveCellIDToOpponent,sendRestartSignalToOpponent:n.sendRestartSignalToOpponent,selfName:n.state.selfName,opponentName:n.selectedOpponent.name,selfAvatar:n.state.avatarImage,opponentAvatar:n.selectedOpponent.avatar,isSelfPlayer1:n.isInitiator}),o.a.createElement(q,{bold:!0},"Quit match and join the available pool again? ",o.a.createElement(M,{onClick:n.handleQuitMatchAndGoBackToAvailablePool},"Yes"))))},n.showAvailablePlayersRoom=function(){var e=n.state,t=e.availablePlayers,a=e.requestsFromPlayers,r=e.connectionStatus;if(0===t.length)return null;var i=t.filter(function(e){return e.socketID!==n.socket.id}),l=Array.from(a.entries()).filter(function(e){var t=Object(Y.a)(e,2);t[0];return null!==t[1].candidate}),c=new Map(l);return o.a.createElement(Me,{invitePlayer:n.invitePlayer,availablePlayers:i,connectionStatus:r,requests:c,acceptPlayerRequest:n.acceptPlayerRequest,rejectPlayerRequest:n.rejectPlayerRequest})},n.state={selfName:"",currentOutgoingTextMessage:"",placeholderForPlayerNameEle:n.defaultPlaceholder,allTextMessages:[],availablePlayers:[],requestsFromPlayers:new Map,isInAvailablePlayersRoom:!1,avatarImage:"",connectionStatus:null},n.socketServerAddress="http://apps.sreekar.co",n.avatarServerAddress="http://apps.sreekar.co",console.log("Using socketServerAddress: ",n.socketServerAddress),console.log("Using avatarServerAddress: ",n.avatarServerAddress),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setIntervalIds=Te(1e3,this.multiPlayerRef,this.nameInputRef,this.basicButtonRef)}},{key:"componentWillUnmount",value:function(){console.log("clearing the setIntervals ",this.setIntervalIds),this.setIntervalIds.forEach(function(e){return clearInterval(e)})}},{key:"render",value:function(){console.log("state in render: ",this.state);var e=this.state,t=e.selfName,n=e.connectionStatus,a=e.avatarImage,r=e.placeholderForPlayerNameEle,i=!1===e.isInAvailablePlayersRoom&&null===n,l=null!==n&&"open"===n.status;return console.log("showJoiningForm: ",i),o.a.createElement(ne,{ref:this.multiPlayerRef},i?o.a.createElement(re,null,o.a.createElement(ie,{name:"playerName",autoFocus:!0,placeholder:r,onKeyUp:this.handleEnter,onChange:this.handleInputChange,value:t}),o.a.createElement(M,{levitate:!0,onClick:this.handleJoinRoomClick,whiteTextAndBlackBackground:!0},"Join room")):o.a.createElement(o.a.Fragment,null,l?this.showGameAndChat():o.a.createElement(o.a.Fragment,null,o.a.createElement(oe,null,o.a.createElement(ae,{src:a}),o.a.createElement(q,{bold:!0},"You are playing as ",o.a.createElement(q,{levitateText:!0,bold:!0,color:"black"},t))),o.a.createElement(le,null,this.showAvailablePlayersRoom()))))}}]),t}(o.a.Component);!function(e){e.SinglePlayer="SinglePlayer",e.MultiPlayer="MultiPlayer"}(Ke||(Ke={}));var $e=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this,{}))).showPopUp=function(t){return e.setState({popUpValue:t})},e.closePopUp=function(){return e.setState({popUpValue:null})},e.gameModeSelectionButtonHandler=function(t){return e.setState({gameMode:t})},e.showViewBasedOnGameMode=function(t){switch(t){case Ke.MultiPlayer:return o.a.createElement(Ze,{showPopUp:e.showPopUp})}},e.popUpView=function(){var t=e.state.popUpValue;return o.a.createElement(X,null,o.a.createElement(L,null,o.a.createElement(Q,{onClick:e.closePopUp},"X"),o.a.createElement(q,{color:"white"},t)))},e.state={popUpValue:null,gameMode:Ke.MultiPlayer},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.popUpValue,n=e.gameMode;return o.a.createElement(v,{theme:W},o.a.createElement(o.a.Fragment,null,o.a.createElement(H,null),o.a.createElement(J,null,t&&this.popUpView(),this.showViewBasedOnGameMode(n))))}}]),t}(o.a.Component);i.a.render(o.a.createElement($e,null),document.getElementById("root"))}},[[44,2,1]]]);
//# sourceMappingURL=main.64af3115.chunk.js.map